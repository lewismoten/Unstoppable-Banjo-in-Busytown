<!doctype html>
<html>
	<head>
		<title>Web RTC Example: Offer</title>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="rtc.css" />
	</head>
	<body>
			<h1>Web RTC Example: Offer</h1>

			<p>
				This example needs a peer to make an
				<a href="offer.html">offer</a>
				and another peer to
				<a href="answer.html">answer</a>
				the offer.
			</p>

			<div id="logWindow" class="log">Ready</div>

			<h2>Establishing a Peer-to-Peer connection</h2>
			<p>
				One of the peers needs to initiate a connection.
				A peer connection is instantiated
				and used to create an offer.
			</p>

			Signaling State: <span id="signalingState">Unknown</span><br />
			<button onclick="onCreateOffer()">Create Offer</button>

			<h3>Local Session Description</h3>

			<p>
				A local session description is prepared
				and is then sent to the remote connection
				as an offer. The SDP (Session Description Protocol)
				also known as a session profile
				describes the communications of the session.
				It would specify type of data to exchange
				such as audio and/or video. 
			</p>

			<p>
				Copy the SDP and send it to the remote peer.
			</p>

			<textarea id="localSessionDescription" class="sdp"></textarea>

			<h3>Remote Session Description</h3>

			<p>
				The remote peer will accept the offer and create an answer
				to send back as a remote session description.
			</p>
			<p>
				Paste the SDP from the remote peer.
			</p>

			<textarea id="remoteSessionDescription" class="sdp"></textarea>
			<button onclick="onAcceptAnswer()">Accept Answer</button>

			<h2>Establishing Connections</h2>
			<p>
				Although the two peers are aware of each other, and the type
				of data that will be exchanged, they are not yet aware of how
				to reach one another. When local session descriptions were 
				set, each peer started creating ICE (Interactive Connectivity
				Establishment) candidates if communications are required. 
				These candidates offer information regarding IP addresses,
				protocols, and ports for each network device. 
			</p>
			<h3>Local ICE Candidates</h3>
			<p>
				The list of ICE candidates will need to be passed to
				the remote peer. They will identify the shortest route that
				can be used to reach the local peer. Only one of the peers needs
				to be able to reach the other to establish a connection.
			</p>
			<p>
				Copy the local ICE candidates and send them to the remote peer.
			</p>
			
			ICE Gathering State: <span id="iceGatheringState">Unknown</span><br />
			ICE Connection State: <span id="iceConnectionState">Unknown</span><br />
			
			<textarea id="localIceCandidates" class="ice"></textarea>

			<h3>Remote ICE Candidates</h3>
			<p>
				The remote peer also has ice candidates that
				it may also offer to the local peer.
			</p>
			<p>
				Paste the ICE candidates from the remote peer.
			</p>
			<textarea id="remoteIceCandidates" class="ice"></textarea>

			<button onclick="onAddIceCandidates()">Add Clients Ice Candidates</button>

			<h2>Exchanging Messages</h2>
			<p>
				Now that both peers are connected to
				each other with open data channels,
				they can send messages back and forth.
			</p>

			<div id="chatWindow" class="chat"></div>
			<input id="messageTextBox">
			<button onclick="onSendMessage()">Send</button>

			<script type="text/javascript" src="rtc.js"></script>
	</body>
</html>